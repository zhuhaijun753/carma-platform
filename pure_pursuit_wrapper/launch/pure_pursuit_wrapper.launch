<?xml version="1.0"?>
<launch>
    <arg name="pp" default="false" />
    <remap from="final_waypoints" to="/guidance/carma_final_waypoints"/> 
    <group if="$(arg pp)"> 
        <param name="ctrl_type" value="pp"/>
        <include file="$(find waypoint_follower)/launch/pure_pursuit.launch">
         <arg name="is_linear_interpolation" value="True"/>
         <arg name="publishes_for_steering_robot" value="True"/>
        </include>
    </group>

    <group unless="$(arg pp)">
        <param name="ctrl_type" value="mpc"/>    
        <include file="$(find waypoint_follower)/launch/mpc_follower.launch">
                <arg name="qp_solver_type" default="unconstraint_fast" doc="optimization solver type. option is unconstraint_fast, unconstraint, and qpoases_hotstart"/>
                <arg name="vehicle_model_type" default="kinematics" doc="vehicle model type for mpc prediction. option is kinematics, kinematics_no_delay, and dynamics"/>
        </include>
    </group>
    <node pkg="pure_pursuit_wrapper" type="pure_pursuit_wrapper_node" name="pure_pursuit_wrapper_node" output="screen">
        <rosparam command="load" file="$(find pure_pursuit_wrapper)/config/default.yaml" />
    </node>
</launch>
